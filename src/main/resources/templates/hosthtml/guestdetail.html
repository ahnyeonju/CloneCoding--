<!DOCTYPE html>
<html lang="ko-KR" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Comaptible" content="IE=Edge">
    <meta http-equiv="Cache-control" content="public">
    <meta name="description" content="객실 및 예약설정에서 광고상품 구매까지 모든 관리가 가능한 여기어때 호스트하우스 전용 통합 마케팅 플랫폼">
    <meta name="keywords" content="여기어때, 사장님사이트, 호스트하우스, 호스트홍보, 게스트하우스, 사장님전용사이트">
    <meta name="author" content="Gray"><!-- humans.txt 처리 권장 -->
    <meta name="apple-mobile-web-app-title" content="여기어때 호스트 하우스" />
    <meta name="viewport"
        content="width=device-width, initial-scale=0.3, minimum-scale=0.3, maximum-scale=1, user-scalable=yes">
    <title>여기어때 호스트 하우스</title>
    <link rel="canonical" href="https://guest.goodchoice.kr" />
    <link rel="shortcut icon" type="image/x-icon" href="/host/img/asset/favicon_170822.ico" />
    <link href="/host/css/bootstrap.min.css" rel="stylesheet">
    <link href="/host/css/common.host.css" rel="stylesheet">

    <script src="/host/js/jquery-2.1.3.min.js"></script>
    <script src="/host/js/jquery-ui.min.js"></script>
    <script src="/host/js/jquery.lazyload.min.js"></script>

                <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
                <![endif]-->
</head>

<body id="main">
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNLLB5W" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>

    <!-- 헤더 -->
    <div th:replace="hostthy/host-header :: host-header"></div>
    <!--헤더 끝 -->




    <!--  안연주 hidden 값 끝  mem 아이디임-->
<!--    <input type="hidden" name="id" id="id" th:value="${id}">-->
    <!--    host id-->
    <input type="hidden" name="hostid" id="hostid">
    <!--   안연주 hidden 값 끝 -->

<!--   날짜-->
    <input type="hidden" name="ahn_sel_date">
    <input type="hidden" name="ahn_sel_date2">
    <section class="container">
        <div class="menu-step3">
            <div class="todo-layer">
                <nav>
                    <ul>
                        <li>
                            <span class="btn-todo"><img src="/host/img/asset/icn_1_info_64x64.png"></span>
                            <span class="todo-desc">마이페이지 입력</span>
                        </li>
                        <li class="prog">
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                        </li>
                        <li>
                            <span class="btn-todo"><img src="/host/img/asset/icn_2_write_64x64.png"></span>
                            <span class="todo-desc">소개 작성</span>
                        </li>
                        <li class="prog">
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                        </li>
                        <li>
                            <span class="btn-todo on"><img src="/host/img/asset/icn_3_rule_64x64.png"></span>
                            <span class="todo-desc on">이용규칙 관리</span>
                        </li>
                        <li class="prog">
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                            <span>&nbsp;</span>
                            <span class="do">&nbsp;</span>
                        </li>
                        <li>
                            <span class="btn-todo"><img src="/host/img/asset/icn_4_room_64x64.png"></span>
                            <span class="todo-desc">객실 관리</span>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="list-layer">
            <div class="guest-title-layer mb_0 pb_0">
                <ul>
                    <li>[이용규칙관리] 는 업체 공통적인 정책을 기입하는 란입니다. (체크인, 체크아웃, 성수기 설정 등)</li>
                    <li>우측 물음표를 클릭하시면 앱에서 어떻게 표시되는지 확인이 가능합니다.</li>
                </ul>
            </div>
            <form class="form-horizontal" id="detail-form" method="post" name="detail">
                <input type="hidden" name="uno" value="15104612" />
                <input type="hidden" name="ano" value="2920" />
                <input type="hidden" name="subpeak" value="" />
                <input type="hidden" name="peak" value="" />
                <table class="table table-bordered">
                    <tbody>

                            <th>숙박 비용</th>
                            <td colspan="2">
                                <div class="form-layer mb_08">
                                    <span class="form-body no-padding-left">
                                        <div class="select-style middle-size">
                                           <input class="form-control normal-size myRetime" type="text" name="armgname" placeholder="금액을 입력하세요." maxlength="30" value="">
                                        </div>
                                    </span>
                                </div>
                                <div class="form-layer-text ml_16">

                                </div>
                            </td>
                        </tr>
                        <tr id='season'>
                            <th>성수기 설정<br />(매년 적용)</th>
                            <td class="bd_r_none">
                                <div class="form-layer">
                                    <span class="form-title text-center title_align">준 성수기</span>
                                    <span class="form-body">
                                        <div class="subpeak-item form-inline mb_24">
                                            <input type="hidden" data-name="subpeak_id" value="" />
                                            <input class="form-control middle-size datepicker" type="text"
                                                data-name="subpeak_start" data-role="datepicker" value=""
                                                readonly="readonly">
                                            <span class="range"> ~ </span>
                                            <input class="form-control middle-size datepicker" type="text"
                                                data-name="subpeak_end" data-role="datepicker" value=""
                                                readonly="readonly">

                                        </div>
                                        <div class="form form-subpeak">
                                            <div class="subpeak-item form-inline mb_24 hide">
                                                <input type="hidden" data-name="subpeak_id" value="" />
                                                <input class="form-control middle-size datepicker" type="text"
                                                    data-name="subpeak_start" data-role="datepicker" value=""
                                                    readonly="readonly">
                                                <span class="range"> ~ </span>
                                                <input class="form-control middle-size datepicker" type="text"
                                                    data-name="subpeak_end" data-role="datepicker" value=""
                                                    readonly="readonly">

                                            </div>
                                        </div>
                                    </span>
                                </div>
                                <div class="form-layer-text">

                                </div>
                                <hr>
                                <div class="form-layer">
                                    <span class="form-title text-center title_align">성수기</span>
                                    <span class="form-body">
                                        <div class="peak-item form-inline mb_24">
                                            <input type="hidden" data-name="peak_id" value="" />
                                            <input class="form-control middle-size datepicker" type="text"
                                                data-name="peak_start" data-role="datepicker" value=""
                                                readonly="readonly">
                                            <span class="range"> ~ </span>
                                            <input class="form-control middle-size datepicker" type="text"
                                                data-name="peak_end" data-role="datepicker" value=""
                                                readonly="readonly">

                                        </div>
                                        <div class="form form-peak">
                                            <div class="peak-item form-inline mb_24 hide">
                                                <input type="hidden" data-name="peak_id" value="" />
                                                <input class="form-control middle-size datepicker" type="text"
                                                    data-name="peak_start" data-role="datepicker" value=""
                                                    readonly="readonly">
                                                <span class="range"> ~ </span>
                                                <input class="form-control middle-size datepicker" type="text"
                                                    data-name="peak_end" data-role="datepicker" value=""
                                                    readonly="readonly">

                                            </div>
                                        </div>
                                    </span>
                                </div>
                                <div class="form-layer-text">

                                </div>
                            </td>
                            <td class="help-tooltip popover-container">
                                <a href="javascript:void(0)" data-toggle="popover"><img
                                        src="/host/img/asset/icn_tooltip_16x16.png" /></a>
                                <div class="hide">
                                    <span><img src="/host/img/tooltips/img_tooltip06.png" /></span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="submit-layer">
                    <button class="btn btn-yeogi btn-submit" type="button" onclick="admit()">저장 후 다음 단계</button>
                </div>
            </form>
        </div>
    </section>
    <script>
        $(function () {
            $('div.exam-layer').addClass('hide');
            $('span.exam-button i').attr('class', 'fa fa-angle-down');
            $('div.exam-layer').removeClass('hide');
            $('span.exam-button i').attr('class', 'fa fa-angle-up');
            $('.guest-title-layer').css('margin-top', '0');
            $('.guest-title-layer').css('border-radius', '5px');


            $('#confirmation_type_' + 2).attr('selected', true);
        });

        function submitConvertDate() {
            if (confirm('예약관리 > 실시간 예약관리에 수정된 이용시간으로 변경됩니다.\n 변경하시겠습니까?')) {
                $('button').prop('disabled', true);

                var checkin = $('select[name=checkin]');
                var checkout = $('select[name=checkout]');

                if (checkin.val().length === 0) {
                    alert('체크인 가능시간을 선택해주세요.');
                    checkin.focus();
                    $('button').prop('disabled', false);
                    return false;
                }

                if (checkout.val().length === 0) {
                    alert('체크아웃 가능시간을 선택해주세요.');
                    checkout.focus();
                    $('button').prop('disabled', false);
                    return false;
                }


                $('#detail-form').attr('action', '/guest/detailDate');
                $('.mo').css('display', 'block');
                $('body').css('overflow', 'hidden');
                $('#detail-form').submit();

            }
        }
    </script>

    <!-- 푸터 -->
    <div th:replace="hostthy/host-footer :: host-footer"></div>
    <!--푸터 끝 -->


<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/host/js/ie10-viewport-bug-workaround.js"></script>
<script src="/host/js/bootstrap.min.js"></script>
<script src="/host/js/moment.min.js"></script>
<script src="/host/js/daterangepicker.js"></script>
<script src="/host/js/bootstrap-timepicker.js"></script>
<script src="/host/js/common.host.js"></script>
<script src="/host/js/guest.host.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
//사용법 1.전송 버튼에 onclick admit() 추가
//2. 숙박 비용 input 태그에 class myRetime 추가 (달력 고쳐져야 함)


    $(function (){


        //멤버 아이디
        const memid = sessionId;
        console.log("멤버아이디"+memid)

        //axios get 해서 뿌리기=================================================
        axios.get('/api/tbmem/tbhost/' + memid , {

        }).then(function (response) {
            console.log(response);



            const hostid = response.data.data.tbMemApiResponse.tbHostApiResponseList[0].id;
            $("input[name='hostid']").attr("value", hostid);
            console.log('호스트id :'+ hostid);

            const myRetime = response.data.data.tbMemApiResponse.tbHostApiResponseList[0].myRetime; //host 숙박비용


            console.log("숙박비용"+myRetime);


            $('.myRetime').attr('value',myRetime); // 숙박비용



        }).catch(function (error) {

        });

    })//onready펑션끝
    //axios get 해서 뿌리기 끝 ===============================================



    //승인버튼
    function admit() {

        const hostid = $('#hostid').val();
        console.log('hostid:'+hostid);


        let myRetime = $(".myRetime").val();
        console.log("숙박비용:"+myRetime);




        axios.request({
            method: 'PATCH',
            url: '/api/host/host3/'+ hostid,
            headers: {'Content-type':'application/json'},
            data: {
                transaction_time:"2021-09-27",
                resultCode:"OK",
                description:"OK",
                data:{
                    id: hostid,
                    myRetime: myRetime,
                    pkSsdate: "2019-09-23",
                    pkCcdate: "2019-09-27"

                    // tbMemId: memid


                }
            }
        }).then(
            alert('저장되었습니다!')
        )
            location.href='/hosthousemain/guestroom/' + sessionId + '/' + hostid;

    }
</script>



</body>

</html>