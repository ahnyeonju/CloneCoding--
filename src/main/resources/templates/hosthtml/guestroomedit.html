<!DOCTYPE html>
<html lang="ko-KR" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Comaptible" content="IE=Edge">
    <meta http-equiv="Cache-control" content="public">
    <meta name="description" content="객실 및 예약설정에서 광고상품 구매까지 모든 관리가 가능한 여기어때 호스트하우스 전용 통합 마케팅 플랫폼">
    <meta name="keywords" content="여기어때, 사장님사이트, 호스트하우스, 호스트홍보, 게스트하우스, 사장님전용사이트">
    <meta name="author" content="Gray"><!-- humans.txt 처리 권장 -->
    <meta name="apple-mobile-web-app-title" content="여기어때 호스트 하우스" />
    <meta name="viewport"
          content="width=device-width, initial-scale=0.3, minimum-scale=0.3, maximum-scale=1, user-scalable=yes">
    <title>여기어때 호스트 하우스</title>
    <link rel="canonical" href="https://guest.goodchoice.kr" />
    <link rel="shortcut icon" type="image/x-icon" href="/host/img/asset/favicon_170822.ico" />
    <link href="/host/css/bootstrap.min.css" rel="stylesheet">
    <link href="/host/css/common.host.css?rand=1628154923" rel="stylesheet">

    <script src="/host/js/jquery-2.1.3.min.js"></script>
    <script src="/host/js/jquery-ui.min.js"></script>
    <script src="/host/js/jquery.lazyload.min.js"></script>
    <script src="/js/ahn_re.js"></script>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>

<body id="main">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNLLB5W" height="0" width="0"
                  style="display:none;visibility:hidden"></iframe></noscript>

<!-- 헤더 -->
<div th:replace="hostthy/host-header :: host-header"></div>
<!--헤더 끝 -->

<!--	a태그 클릭시 넘어와야 하는 값-->
<!--  안연주 hidden 값 끝  room 아이디임-->
<input type="hidden" name="id" id="id" th:value="${id}">
<!--    host id-->
<input type="hidden" name="hostid" id="hostid" >

<section class="container">
    <div class="menu-step3">
        <div class="todo-layer">
            <nav>
                <ul>
                    <li>
                        <span class="btn-todo"><img src="/host/img/asset/icn_1_info_64x64.png"></span>
                        <span class="todo-desc">마이페이지 입력</span>
                    </li>
                    <li class="prog">
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                    </li>
                    <li>
                        <span class="btn-todo"><img src="/host/img/asset/icn_2_write_64x64.png"></span>
                        <span class="todo-desc">소개 작성</span>
                    </li>
                    <li class="prog">
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                    </li>
                    <li>
                        <span class="btn-todo"><img src="/host/img/asset/icn_3_rule_64x64.png"></span>
                        <span class="todo-desc">이용규칙 관리</span>
                    </li>
                    <li class="prog">
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                        <span>&nbsp;</span>
                        <span class="do">&nbsp;</span>
                    </li>
                    <li>
                        <span class="btn-todo on"><img src="/host/img/asset/icn_4_room_64x64.png"></span>
                        <span class="todo-desc on">객실 관리</span>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="guest-nav">

    </div>


    <div class="list-layer">
        <form id="room-form" class="form-horizontal" method="post">
            <input type="hidden" name="armgno" value="" />
            <input type="hidden" name="data" />
            <table class="table table-bordered">
                <tbody>
                <tr>
                    <th>객실 정보</th>
                    <td class="bd_r_none">
                        <div class="form-layer mb_24">
                            <span class="form-title">객실명</span>
                            <span class="form-body">
                                        <input class="form-control normal-size rmName" type="text" name="armgname"
                                               placeholder="이름을 입력하세요." maxlength="20" value="">
                                    </span>
                        </div>
                        <div class="form-layer mb_24">
                            <span class="form-title">객실 유형</span>
                            <span class="form-body">
                                        <div class="select-style" style="width:150px">
                                            <select name="rmType">
                                                <option value="undifined" >객실을 선택해주세요</option>
                                                <option value="도미토리 (혼성)">도미토리 (혼성)</option>
                                                <option value="도미토리 (여자)">도미토리 (여자)</option>
                                                <option value="도미토리 (남자)">도미토리 (남자)</option>
                                                <option value="개인실">개인실</option>
                                                <option value="독채형 (콘도형)">독채형 (콘도형)</option>
                                            </select>
                                        </div>
                                    </span>
                        </div>
                        <div class="form-layer">
                            <span id="title-by-room-type" class="form-title">인원</span>
                            <span class="form-body">
                                        <div class="pull-left">
                                            <span
                                                    style="height:48px;line-height:48px;float:left;width:36px;font-size:14px;color: rgba(0, 0, 0, 0.87);font-weight:500">정원</span>
                                            <div class="select-style small-size">
                                                <select name="rmNumber">
                                                    <option value="2">2 명</option>
                                                    <option value="3">3 명</option>
                                                    <option value="4">4 명</option>
                                                    <option value="5" selected="selected=">5 명</option>
                                                    <option value="6">6 명</option>
                                                    <option value="7">7 명</option>
                                                    <option value="8">8 명</option>
                                                    <option value="9">9 명</option>
                                                    <option value="10">10 명</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="pull-left hide">
                                            <span
                                                    style="height:48px;line-height:48px;float:left;width:36px;font-size:14px;color: rgba(0, 0, 0, 0.87);font-weight:500">정원</span>
                                            <div class="select-style small-size">
                                                <select name="personal_cnt">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="pull-left hide">
                                            <span
                                                    style="height:48px;line-height:48px;float:left;width:36px;font-size:14px;color: rgba(0, 0, 0, 0.87);font-weight:500;margin-left:15px">최대</span>
                                            <div class="select-style small-size">
                                                <select name="personal_max_cnt">
                                                </select>
                                            </div>
                                        </div>
                                    </span>
                        </div>
                    </td>
                    <!-- 물음표 -->
                    <td class="help-tooltip popover-container">
                        <!-- <a href="javascript:void(0)" data-toggle="popover"><img src="../host/img/asset/icn_tooltip.png"></a> -->
                        <div class="hide">
                            <!-- <span><img src="../host/img/tooltips/room/img_tooltip08.png" /></span> -->
                        </div>
                    </td>
                    <!-- 물음표 -->
                </tr>
                <tr style="display:none;">
                    <th>이미지 정보<br /></th>
                    <td class="bd_r_none">
                        <div class="form-layer">
                            <p class="description text-normal">* 객실 유형을 먼저 선택하신 후 업로드 가능합니다.</p>
                            <input multiple="multiple" type="file" id="ex_file" name="filename[]" />
                        </div>
                    </td>
                    <!-- 물음표 -->
                    <td class="help-tooltip popover-container">
                        <!-- <a href="javascript:void(0)" data-toggle="popover"><img src="../host/img/asset/icn_tooltip.png"></a> -->
                        <div class="hide">
                            <!-- <span><img src="../host/img/tooltips/room/img_tooltip09.png" /></span> -->
                        </div>
                    </td>
                    <!-- 물음표 -->
                </tr>
                <tr>
                    <th>객실<br>소개글</th>
                    <td colspan="2">
                        <div class="form-layer">
                                    <textarea class="form-control textarea-layer rmIntro" rows=" 8" name="introduction"
                                              placeholder="객실 내 침대 구성과, 전용 욕실 여부 등 객실 소개/구성을 자세히 기재해 주세요."></textarea>
                        </div>
                        <span class="exam-button"> <i class="fa fa-angle-down" aria-hidden="true"></i></span>
                        <div class="exam-layer hide" style="width:714px">
                            <div class="exam-layer-guide9">
                                <div class="exam-detail-layer">
                                            <span class="guide-text">
                                                도미토리<br />
                                                이층침대 2개 혹은 온돌방으로 개인침구세트 4개 제공<br />
                                                개인 콘센트, 캐비닛, 전등 구비<br /><br />
                                                개인실<br />
                                                더블침대 1개+인원에 맞는 침구세트 추가제공<br /><br />
                                                독채<br />
                                                방 2개, 거실, 화장실, 부엌,베란다<br />
                                                취사 전자제품(냉장고,전자레인지,인덕션,밭솥 등)과 식기류 및 기본 양념도 구비되어 있습니다.
                                                <br /><br />
                                            </span>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <th>편의시설<br />서비스 안내</th>
                    <td class="bd_r_none">
                        <div class="form-layer">
                                    <textarea class="form-control textarea-layer rmService" rows="3" name="fixtures"
                                              placeholder="도미토리 :  객실 내 침대 구성 및 구비 물품 등을 자세히 기재해 주세요.&#13;&#10;개인실 : 객실 내 전용 욕실 여부 및 침대 구성과 구비 물품 등을 자세히 기재해 주세요.&#13;&#10;독채 : 객실 구조 및 침대 구성, 취사 구비 물품 등을 자세히 기재해 주세요."></textarea>
                        </div>
                    </td>
                    <!-- 물음표 -->
                    <td class="help-tooltip popover-container">
                        <!-- <a href="javascript:void(0)" data-toggle="popover"><img src="../host/img/asset/icn_tooltip.png"></a> -->
                        <div class="hide">
                            <!-- <span><img src="../host/img/tooltips/room/img_tooltip10.png" /></span> -->
                        </div>
                    </td>
                    <!-- 물음표 -->
                </tr>
                <tr>
                    <th>
                        요금 설정<br />


                    </th>
                    <td class="bd_r_none">
                        <div class="form-layer">
                            <p class="description"><strong>* 해당 페이지의 요금 설정은 객실별 기준가격 입니다. 객실별 판매 금액은 '예약관리 > 실시간
                                예약 관리' 에서 수정하셔야 합니다.</strong></p>
                        </div>
                        <div class="form-layer ">


                                    <span class="form-body" data-season="NORMAL" style="width:725px">


                                        <!-- 변경 디자인 -->
                                        <span class="form-title large" style="vertical-align:top">&nbsp&nbsp&nbsp&nbsp기본
                                            (비수기)</span>
                                        <div class="room-price room-price-wrap">
                                            <input data-role="type" type="hidden" value="NORMAL" />
                                            <input data-role="adpno" type="hidden" value="" />
                                            <input data-role="adpsino" type="hidden" value="" />
                                            <div class="chk_date chk_date1">
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-sun" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">일</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-mon" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">월</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-tue" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">화</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-wed" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">수</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-thu" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">목</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-fri" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">금</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-sat" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">토</label>
                                            </div>
                                            <div class="form-inline">
                                                <label data-role="price" class="radio-inline" style="margin-right:10px">
                                                    정상가 : <input data-role="" class="form-control input-sm prSprice" type="text"
                                                                 style="width:90px"> 원
                                                </label>
                                            </div>
                                        </div>
                                        <span class="form-title large" style="vertical-align:top">&nbsp&nbsp&nbsp&nbsp기본
                                            (성수기)</span>
                                        <div class="room-price room-price-wrap">
                                            <input data-role="type" type="hidden" value="NORMAL" />
                                            <input data-role="adpno" type="hidden" value="" />
                                            <input data-role="adpsino" type="hidden" value="" />
                                            <div class="chk_date chk_date2">
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-sun" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">일</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-mon" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">월</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-tue" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">화</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-wed" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">수</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-thu" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week">목</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-fri" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">금</label>
                                                <label class="checkbox-inline icon-label"><input type="checkbox"
                                                                                                 class="NORMAL-sat" onclick="weekOverlapCheck(this)"
                                                                                                 data-role="week" checked="checked">토</label>
                                            </div>
                                            <div class="form-inline">
                                                <label class="radio-inline" style="margin-right:10px">
                                                    정상가 : <input data-role="price" class="form-control input-sm prPrice"
                                                                 type="text" style="width:90px"> 원
                                                </label>
                                            </div>

                                        </div>
                                        <!-- // -->
                                    </span>
                        </div>

                    </td>
                    <!-- 물음표 -->
                    <td class="help-tooltip popover-container">
                        <!-- <a href="javascript:void(0)" data-toggle="popover"><img src="../host/img/asset/icn_tooltip.png" style="margin-top: 18px;"></a>
                    <div class="hide"> -->
                        <!-- <span><img src="../host/img/tooltips/room/img_tooltip11.png" /></span> -->
                        <!--        </div>-->
                    </td>
                    <!-- 물음표 -->
                </tr>
<!--                <tr  style="">-->
<!--                    <th>객실 이미지<br />(최대 3장)</th>-->
<!--                    <td class="bd_r_none">-->
<!--                        <div class="form-layer mb_15">-->
<!--                            <p class="description text-normal">* 객실 및 업체 전경, 로비, 주차장 등 업체의 전반적인 이미지를 업로드해주시기-->
<!--                                바랍니다.</p>-->
<!--                            <p class="description text-normal">* 첫 이미지가 메인 이미지입니다.</p>-->
<!--                        </div>-->

<!--                        <div class="form-layer mb_15">-->
<!--                            <ul id="room-images">-->
<!--                            </ul>-->
<!--                        </div>-->

<!--                        <div class="form-layer-text">-->
<!--                            <input type="file" id="imgFile" name="imgFile" multiple onchange="setThumbnail(event);"/>-->
<!--                            <button type="button" class="btn btn-default" id="Button"  onclick="sendit();">이미지 추가</button>-->
<!--                        </div>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                안연주 이미지 관련-->
<!--                <tr style="">-->
<!--                    <th>업로드 이미지 미리보기</th>-->
<!--                    <td>-->
<!--                        <div >-->
<!--                            <div id="image_container" style="display: flex; justify-content: flex-start;"></div>-->
<!--                        </div>-->
<!--                    </td>-->
<!--                </tr>-->
                <!--                        업체이미지수정삭제-->
                <tr style="">
                    <th>저장된 이미지</th>
                    <!--                            <img src="/img/hostimage//9b74a7d1-679f-4582-82e8-90ccae1bd8a9_고양 (1).png">-->
                    <td>
                        <div class="form-layer">
                            <p class="description"><strong>* 너무 큰 이미지는 반영이 되지않을 수 있습니다.</strong></p>
                        </div>
                        <div >
                            <input id="ahn_edit_hostimg_1" class="ahn_edit_hostimg_1" type="file" style="visibility: hidden">
                            <div id="ahn_edit_hostimg" style="display: flex; flex-wrap: wrap;justify-content: flex-start; word-break:break-all;word-wrap:break-word;">


                            </div>
                        </div>
                    </td>
                </tr>
                <!--                       // 업체이미지수정삭제-->
                <!--                    안연주 이미지관련-->


                </tbody>
            </table>
            <div class="submit-layer">
                <!-- <button class="btn btn-default btn-submit btn-guest-room" type="button"
                    onclick="deleteRoomInfo()">삭제하기</button> -->
                &nbsp;&nbsp;&nbsp;
                <button class="btn btn-yeogi btn-submit btn-guest-room" type="button"
                        onclick="patchit()">수정하기</button>
            </div>
            <div class="submit-layer info-text-layer">
                <p><img src="/host/img/tooltips/room/ic_guide.png"></p>
                <p class="description info-text"><strong>"저장하기"</strong>는 객실 정보 등 모든 정보를 <strong>이 페이지 내에서만 저장</strong>가능
                </p>
                <p class="description info-text"><strong>"저장 및 [실시간 예약관리] 반영"</strong>은 변경하신 요금과 정원인원에 대하여 <strong>달력에서도
                    반영</strong></p>
            </div>
        </form>
    </div>
</section>
<!-- <div class="mo"></div> -->
<!-- <script src="../host/js/upload.js?nocache=2021-08-18 21:09:27"></script> -->
<!-- <script src="../host/js/dmuploader.js"></script> -->

<script>
    function submitRoomInfo() { // 저장하기
        $('button').prop('disabled', true);
        if ($('#room-form input[name=armgname]').val().length < 3) {
            alert('객실명은 3자 이상 입력해주세요.');
            $('#room-form input[name=armgname]').focus();
            $('button').prop('disabled', false);
            return false;
        }

        var room_type = $('select[name=room_type]');
        var introduction = $('textarea[name=introduction]');
        var fixtures = $('textarea[name=fixtures]');
        var personal_cnt = $('select[name=personal_cnt]');
        var personal_max_cnt = $('select[name=personal_max_cnt]');

        if (room_type.val().length === 0) {
            alert('객실 유형을 선택해주세요.');
            room_type.focus();
            $('button').prop('disabled', false);
            return false;
        }
        if (parseInt(personal_cnt.val()) > parseInt(personal_max_cnt.val())) {
            alert('정원 인원이 최대 인원보다 클 수 없습니다.');
            personal_cnt.focus();
            $('button').prop('disabled', false);
            return false;
        }
        if (introduction.val().length === 0) {
            alert('객실 소개글을 입력해주세요.');
            introduction.focus();
            $('button').prop('disabled', false);
            return false;
        }
        if (fixtures.val().length === 0) {
            alert('편의시설 서비스안내를 입력해주세요.');
            fixtures.focus();
            $('button').prop('disabled', false);
            return false;
        }

        var lowPrice = false;
        $('input[data-role=price]').each(function () {
            if (parseInt($(this).val().replace(/,/g, '')) < 5000) lowPrice = true;
        });

        if (lowPrice) {
            alert('정상가 5,000 원 미만은 등록이 불가능합니다.');
            $('input[data-role=price]').each(function ($i) {
                if (parseInt($(this).val().replace(/,/g, '')) < 5000) $('input[data-role=price]')[$i]
                    .focus();
            });
            $('button').prop('disabled', false);
            return false;
        }



        $data = [];
        $('div.room-price').each(function ($i) {
            $data[$i] = '';
            $(this).find('input').each(function ($j) {
                if ($j > 0) $data[$i] += ',';
                if ($(this).attr('type') == 'radio' || $(this).attr('type') == 'checkbox') $data[
                    $i] += $(this).is(':checked') ? 1 : 2;
                else $data[$i] += $(this).val();
            });
        });



        var data_check = $('#room-form input[name=data]').val($data.join('|'));
        var datas = data_check.val().split('|');

        for (var i = 0; i < datas.length; i++) {
            var data_array = datas[i].split(',');
            if (data_array[0] === 'NORMAL' && (data_array[12].length === 0 || data_array[12] === '0')) {
                alert('객실 기본 요금을 입력해주시기 바랍니다.');
                $('input[data-role=price]:eq(' + i + ')').focus();
                $('button').prop('disabled', false);
                return false;
            }
        }

        $('#room-form').submit();

    }

    function submitConvertPrice() {
        if (confirm(
            '예약관리 > 실시간 예약관리에 수정된 가격으로 변경됩니다.\n! 주의 : 실시간 예약관리에서 일별로 변경하신 가격이 초기화 됩니다. 마감설정은 초기화되지 않습니다.\n변경하시겠습니까?'
        )) {
            $('button').prop('disabled', true);
            if ($('#room-form input[name=armgname]').val().length < 3) {
                alert('객실명은 3자 이상 입력해주세요.');
                $('#room-form input[name=armgname]').focus();
                $('button').prop('disabled', false);
                return false;
            }

            var room_type = $('select[name=room_type]');
            var introduction = $('textarea[name=introduction]');
            var fixtures = $('textarea[name=fixtures]');
            var personal_cnt = $('select[name=personal_cnt]');
            var personal_max_cnt = $('select[name=personal_max_cnt]');

            if (room_type.val().length === 0) {
                alert('객실 유형을 선택해주세요.');
                room_type.focus();
                $('button').prop('disabled', false);
                return false;
            }
            if (parseInt(personal_cnt.val()) > parseInt(personal_max_cnt.val())) {
                alert('정원 인원이 최대 인원보다 클 수 없습니다.');
                personal_cnt.focus();
                $('button').prop('disabled', false);
                return false;
            }
            if (introduction.val().length === 0) {
                alert('객실 소개글을 입력해주세요.');
                introduction.focus();
                $('button').prop('disabled', false);
                return false;
            }
            if (fixtures.val().length === 0) {
                alert('편의시설 서비스안내를 입력해주세요.');
                fixtures.focus();
                $('button').prop('disabled', false);
                return false;
            }

            var lowPrice = false;
            $('input[data-role=price]').each(function () {
                if (parseInt($(this).val().replace(/,/g, '')) < 5000) lowPrice = true;
            });

            if (lowPrice) {
                alert('정상가 5,000 원 미만은 등록이 불가능합니다.');
                $('input[data-role=price]').each(function ($i) {
                    if (parseInt($(this).val().replace(/,/g, '')) < 5000) $('input[data-role=price]')[$i]
                        .focus();
                });
                $('button').prop('disabled', false);
                return false;
            }



            $data = [];
            $('div.room-price').each(function ($i) {
                $data[$i] = '';
                $(this).find('input').each(function ($j) {
                    if ($j > 0) $data[$i] += ',';
                    if ($(this).attr('type') == 'radio' || $(this).attr('type') == 'checkbox')
                        $data[$i] += $(this).is(':checked') ? 1 : 2;
                    else $data[$i] += $(this).val();
                });
            });



            var data_check = $('#room-form input[name=data]').val($data.join('|'));
            var datas = data_check.val().split('|');

            for (var i = 0; i < datas.length; i++) {
                var data_array = datas[i].split(',');
                if (data_array[0] === 'NORMAL' && (data_array[12].length === 0 || data_array[12] === '0')) {
                    alert('객실 기본 요금을 입력해주시기 바랍니다.');
                    $('input[data-role=price]:eq(' + i + ')').focus();
                    $('button').prop('disabled', false);
                    return false;
                }
            }

            $('#room-form').attr('action', '/guest/roominfoPrice');
            $('.mo').css('display', 'block');
            $('body').css('overflow', 'hidden');
            $('#room-form').submit();

        }
    }

    function roomCopy(ano, armgno) {
        if (confirm('선택하신 객실의 정보를 복사합니다.\n객실정보 복사를 하시겠습니까?')) {
            $('button').prop('disabled', true);
            $.post('/guest/roomCopy', 'ano=' + ano + '&armgno=' + armgno, function (result) {
                if (jQuery.parseJSON(result).message === 'SUCCESS') {

                    alert('객실정보 복사가 완료 되었습니다.');
                    var url = '/guest/room?armgno=' + jQuery.parseJSON(result).armgno;
                    $(location).attr('href', url);
                } else {
                    alert('객실정보 복사 처리에 실패하였습니다. 관리자에게 문의하세요.');
                    $('button').prop('disabled', false);
                }
            }).fail(function () {
                alert('오류가 발생했습니다. 관리자에게 문의하세요.');
                $('button').prop('disabled', false);
            });


        }
    }



    $(function () {
        $('div.exam-layer').removeClass('hide');
        $("#room-images").sortable();
        $("#room-images").disableSelection();

        var key = 0;

        $('select[name=room_type]').change(function () {
            var ano = 2919;
            var type = $(this).val();
            $.post('/guest/addRoom/' + type, function (res) {
                window.location.href = '/guest/room?armgno=' + res.armgno;
            });
        });


        // 룸타입설정
        $('select[name=room_type]').change(function () {

            //     if ($(this).val() <= 3) { // 도미
            //         $('#title-by-room-type').html('침대 개수');
            //         $('select[name=personal_cnt]').closest('div.pull-left').addClass('hide');
            //         $('select[name=personal_max_cnt]').closest('div.pull-left').addClass('hide');
            //         $('select[name=bunk_bed]').closest('div.pull-left').removeClass('hide');
            //     } else {
            //         if ($(this).val() == 4) {
            //             $('select[name=personal_cnt] option').remove();
            //             $('select[name=personal_max_cnt] option').remove();
            //             var html = '';
            //             var html2 = '';
            //             html += '<option value="1">1 명</option>';
            //             html2 += '<option value="1">1 명</option>';
            //             html += '<option value="2">2 명</option>';
            //             html2 += '<option value="2">2 명</option>';
            //             html += '<option value="3">3 명</option>';
            //             html2 += '<option value="3">3 명</option>';
            //             html += '<option value="4">4 명</option>';
            //             html2 += '<option value="4">4 명</option>';
            //             html += '<option value="5">5 명</option>';
            //             html2 += '<option value="5">5 명</option>';
            //             html += '<option value="6">6 명</option>';
            //             html2 += '<option value="6">6 명</option>';
            //             html += '<option value="7">7 명</option>';
            //             html2 += '<option value="7">7 명</option>';
            //             html += '<option value="8">8 명</option>';
            //             html2 += '<option value="8">8 명</option>';
            //             html += '<option value="9">9 명</option>';
            //             html2 += '<option value="9">9 명</option>';
            //             html += '<option value="10" selected="selected=">10 명</option>';
            //             html2 += '<option value="10" selected="selected=">10 명</option>';
            //             $(html).appendTo('select[name=personal_cnt]');
            //             $(html2).appendTo('select[name=personal_max_cnt]');
            //         }
            //         if ($(this).val() == 5) {
            //             $('select[name=personal_cnt] option').remove();
            //             $('select[name=personal_max_cnt] option').remove();
            //             var html = '';
            //             var html2 = '';
            //             html += '<option value="1">1 명</option>';
            //             html2 += '<option value="1">1 명</option>';
            //             html += '<option value="2">2 명</option>';
            //             html2 += '<option value="2">2 명</option>';
            //             html += '<option value="3">3 명</option>';
            //             html2 += '<option value="3">3 명</option>';
            //             html += '<option value="4">4 명</option>';
            //             html2 += '<option value="4">4 명</option>';
            //             html += '<option value="5">5 명</option>';
            //             html2 += '<option value="5">5 명</option>';
            //             html += '<option value="6">6 명</option>';
            //             html2 += '<option value="6">6 명</option>';
            //             html += '<option value="7">7 명</option>';
            //             html2 += '<option value="7">7 명</option>';
            //             html += '<option value="8">8 명</option>';
            //             html2 += '<option value="8">8 명</option>';
            //             html += '<option value="9">9 명</option>';
            //             html2 += '<option value="9">9 명</option>';
            //             html += '<option value="10">10 명</option>';
            //             html2 += '<option value="10">10 명</option>';
            //             html += '<option value="11">11 명</option>';
            //             html2 += '<option value="11">11 명</option>';
            //             html += '<option value="12">12 명</option>';
            //             html2 += '<option value="12">12 명</option>';
            //             html += '<option value="13">13 명</option>';
            //             html2 += '<option value="13">13 명</option>';
            //             html += '<option value="14">14 명</option>';
            //             html2 += '<option value="14">14 명</option>';
            //             html += '<option value="15">15 명</option>';
            //             html2 += '<option value="15">15 명</option>';
            //             html += '<option value="16">16 명</option>';
            //             html2 += '<option value="16">16 명</option>';
            //             html += '<option value="17">17 명</option>';
            //             html2 += '<option value="17">17 명</option>';
            //             html += '<option value="18">18 명</option>';
            //             html2 += '<option value="18">18 명</option>';
            //             html += '<option value="19">19 명</option>';
            //             html2 += '<option value="19">19 명</option>';
            //             html += '<option value="20" selected="selected=">20 명</option>';
            //             html2 += '<option value="20" selected="selected=">20 명</option>';
            //             $(html).appendTo('select[name=personal_cnt]');
            //             $(html2).appendTo('select[name=personal_max_cnt]');
            //         }
            //         $('#title-by-room-type').html('인원');
            //         $('select[name=personal_cnt]').closest('div.pull-left').removeClass('hide');
            //         $('select[name=personal_max_cnt]').closest('div.pull-left').removeClass('hide');
            //         $('select[name=bunk_bed]').closest('div.pull-left').addClass('hide');
            //     }
            // });

            // 1인 추가 가격 / 증가율 Radio 선택 처리
            $(document).on('click', '[data-role=artype]', function (event) {
                $(this).find('input[type=radio]').attr('checked', true);
                $(this).parent().siblings().find('input:radio').attr('checked', false);
            });

            // 요일 선택
            $(document).on('click', '[data-role=week]', function () {
                $(this).find('input[type=checkbox]').attr('checked', !$(this).find(
                    'input[type=checkbox]').attr('checked'));
            });

            // 시즌별 요금 설정폼 추가
            $('[data-role=season-NORMAL],[data-role=season-PEAK],[data-role=season-SUBPEAK]').click(
                function () {

                    key = key + 1;
                    $season = $(this).attr('data-role').replace('season-', '');




                    $html = '<div class="room-price room-price-wrap">' +
                        '<input data-role="type" type="hidden" value="' + $season + '" />' +
                        '<input data-role="adpno" type="hidden" />' +
                        '<input data-role="adpsino" type="hidden" />' +
                        '<div class="chk_date">' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-sun" onclick="weekOverlapCheck(this)" data-role="week">일</label>' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-mon" onclick="weekOverlapCheck(this)" data-role="week">월</label>' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-tue" onclick="weekOverlapCheck(this)" data-role="week">화</label>' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-wed" onclick="weekOverlapCheck(this)" data-role="week">수</label>' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-thu" onclick="weekOverlapCheck(this)" data-role="week">목</label>' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-fri" onclick="weekOverlapCheck(this)" data-role="week">금</label>' +
                        '<label class="checkbox-inline icon-label"><input type="checkbox" class="' +
                        $season + '-sat" onclick="weekOverlapCheck(this)" data-role="week">토</label>' +
                        '</div>' +
                        '<div class="form-inline">' +
                        '<label data-role="price" class="radio-inline" style="margin-right:10px">' +
                        '정상가 : <input data-role="" class="form-control input-sm" type="text" style="width:90px"> 원' +
                        '</label>';
                    $html += '</div>' +
                        '<button class="btn_del" data-role="remove-new-' + $season + '">삭제</button>' +
                        '</div>';
                    $($html).appendTo('[data-season=' + $season + ']');
                });
        });
        $('.guest-title-layer').css('margin-top', '0');
        $('.guest-title-layer').css('box-shadow', '-1px 1px 5px #aaa');
        $('.guest-title-layer').css('border-top-right-radius', '5px');
        $('.guest-title-layer').css('border-bottom-left-radius', '5px');
        $('.guest-title-layer').css('border-bottom-right-radius', '5px');
        $('.list-layer').css('margin-top', '0');


        function weekOverlapCheck(obj) {
            var chkObj = $("." + $(obj).attr("class"));
            var maxCnt = 1;
            var cnt = 0;

            $.each(chkObj, function (idx, key) {
                if (key.checked == true) cnt++;
            });

            if (cnt > maxCnt) {
                $(obj).attr("checked", false);
            }
        }
</script>

<!-- 푸터 -->
<div th:replace="hostthy/host-footer :: host-footer"></div>
<!--푸터 끝 -->

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<!-- <script src="../host/js/ie10-viewport-bug-workaround.js"></script>
<script src="../host/js/bootstrap.min.js"></script>
<script src="../host/js/moment.min.js"></script>
<script src="../host/js/daterangepicker.js"></script>
<script src="../host/js/bootstrap-timepicker.js"></script> -->
<script src="/host/js/common.host.js?nocache=1629288567.5037"></script>
<script src="/host/js/guest.host.js?nocache=1629288567.5037"></script>
<!--삭제하기 버튼 -->


<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

    $(function (){


        //룸 아이디
        const roomid = $('#id').val();
        console.log("룸아이디"+ roomid)

        //axios get 해서 뿌리기=================================================
        axios.get('/api/room/rrlist/' + roomid , {

        }).then(function (response) {
            console.log(response);


            const hostid = response.data.data.tbHostId//호스트 id
            $("input[name='hostid']").attr("value", hostid);
            console.log('호스트id :'+ hostid);


            // const myIntcom = response.data.data.tbMemApiResponse.tbHostApiResponseList[0].myIntcom; //host 업체명
            const rmName = response.data.data.rmName; //객실명
            const rmType = response.data.data.rmType; //객실 유형
            $("select[name=rmType]").val(rmType).prop("selected", true);
            const rmNumber = response.data.data.rmNumber;//인원
            $("select[name=rmNumber]").val(rmNumber).prop("selected", true);
            const rmIntro = response.data.data.rmIntro;//객실 소개글
            const rmService = response.data.data.rmService;//편의시설 서비스 안내
            //요금설정 기본(비수기) checkbox
            const prSprice = response.data.data.prSprice;//요금설정 기본(비수기) 정상가 n원
            //요금설정 기본(성수기) checkbox
            const prPrice = response.data.data.prPrice;// 요금설정 기본(성수기) 정상가 n원




            $('.rmName').attr('value',rmName); // 객실명
            $('.rmType').attr('value',rmType); // 객실 유형
            $('.rmNumber').attr('value',rmNumber); // 인원
            $('.rmIntro').attr('value',rmIntro); // 객실 소개글
            $('.rmIntro').text(rmIntro);
            $('.rmService').attr('value',rmService); // 편의시설 서비스 안내
            $('.rmService').text(rmService);
            //요금설정 기본(비수기) checkbox
            $('.prSprice').attr('value',prSprice); // 요금설정 기본(비수기) 정상가 n원
            //요금설정 기본(성수기) checkbox
            $('.prPrice').attr('value',prPrice); // 요금설정 기본(성수기) 정상가 n원





            console.log('안나와?')
            axios.get('/room/imglist/'+roomid, {
            }).then(function (response){
                console.log(response);
                for(let i in response.data){
                    let imgid = response.data[i].id;
                    // let hostid = response.data[i].tbRoomId;
                    //안연주 경로 글자수바꾸기
                    let safeFile = response.data[i].safeFile.substr(56);

                    console.log("imgid----");
                    console.log(imgid);
                    // console.log(hostid);
                    console.log(safeFile);

                    // 여기서 hostid 는 th:value의 값을 가져온다 introwrite랑 다르니 주의
                    let roomImgList = $(`<div>`).append(
                        `<div style="position: absolute;">`+
                        `<div class="roo_" value="img_`+imgid+`" onclick="ahn_del_Img(this);" style="position: relative; top: 0.2rem; left: 200px; ">`+
                        `<img src="/img/mainimages/cancel32.png">`+
                        `</div>`+
                        `</div>`+
                        `<div style="position: absolute;">`+
                        `<div class="roo_" value="img_`+imgid+`" onclick="ahn_edit_Img(this);" style="position: relative; top: 0.2rem; left: 150px; ">`+
                        `<img src="/img/mainimages/pencil32.png">`+
                        `</div>`+
                        `</div>`+
                        `<img style="width:240px; height:240px" src="`+safeFile+`" alt="이미지경로/클릭시아이디값들">`+
                        `</div>`

                    );
                    $('#ahn_edit_hostimg').append(roomImgList);

                }//get get 안의 for끝

            }).catch(function (err){
                console.log(err)
            });





            // $('.myIntcom').attr('value',myIntcom); // 업체명


        }).catch(function (error) {

        });

    })//onready펑션끝
    //axios get 해서 뿌리기 끝 ===============================================







    //수정 후 다음으로
    function patchit(){


        //유효성
        if ($('.rmName').val() == "") {
            alert("객실명(20자이하)을 입력해주세요(필수)");
            $(".rmName").focus();
            return false;
        }
        if ($('.rmIntro').val() == "") {
            alert("객실소개글을 입력해주세요");
            $(".rmIntro ").focus();
            return false;
        }
        if ($('.rmService').val() == "") {
            alert("편의시설 서비스 안내를 입력해주세요");
            $(".rmService").focus();
            return false;
        }
        if ($('.prSprice').val() == "") {
            alert("비수기금액을 입력해주세요");
            $(".prSprice").focus();
            return false;
        }
        if ($('.prPrice').val() == "") {
            alert("성수기금액을 입력해주세요");
            $(".prPrice").focus();
            return false;
        }



        //룸 아이디
        const roomid = $('#id').val();
        console.log("룸아이디"+ roomid)


        const hostid = $('#hostid').val();
        console.log('hostid:'+hostid);



        const rmName = $(".rmName").val(); //객실명
        console.log("객실명 :" + rmName);
        // const rmType = $(".rmType").val(); //객실 유형
        const rmType = $("select[name=rmType]").val();// 인원
        console.log("객실 유형 :" + rmType);
        // const rmNumber = $(".rmNumber").val(); //인원
        const rmNumber = $("select[name=rmNumber]").val();// 인원
        console.log("인원 :" + rmNumber);
        const rmIntro = $(".rmIntro").val(); //객실 소개글
        console.log("객실 소개글 :" + rmIntro);
        const rmService = $(".rmService").val(); //편의시설 서비스 안내
        console.log("편의시설 서비스 안내 :" + rmService);
        //요금설정 기본(비수기) checkbox
        //prSdate
        let days1 = "";
        let forweek1 = $(".chk_date1 input:checkbox");
        let week1 = ["일,", "월,", "화,", "수,", "목,", "금,", "토,"];

        for (let i = 0; i < forweek1.length; i++) {
            if($(".chk_date1 input:checkbox").eq(i).prop("checked")) {
                days1 += week1[i];
            }
        }

        days1 = days1.substring(0, days1.lastIndexOf(","))
        console.log(days1);
        // alert('요금설정 기본(비수기) 멈춰봐');


        const prSprice = $(".prSprice").val(); //요금설정 기본(비수기) 정상가 n원
        console.log("요금설정 기본(비수기) 정상가 n원 :" + prSprice);
        //요금설정 기본(성수기) checkbox
        //prCDate
        let days2 = "";
        let forweek2 = $(".chk_date2 input:checkbox");
        let week2 = ["일,", "월,", "화,", "수,", "목,", "금,", "토,"];

        for (let i = 0; i < forweek2.length; i++) {
            if($(".chk_date2 input:checkbox").eq(i).prop("checked")) {
                days2 += week2[i];
            }
        }

        days2 = days2.substring(0, days2.lastIndexOf(","))
        console.log(days2);
        // alert('요금설정 기본(성수기) 멈춰봐');

        const prPrice = $(".prPrice").val(); // 요금설정 기본(성수기) 정상가 n원
        console.log("요금설정 기본(성수기) 정상가 n원 :" + prPrice);







        // alert('멈');

        axios.request({
            method: 'PUT',
            url: '/api/room/rrlist/'+ hostid,
            headers: {'Content-type':'application/json'},
            data: {
                transaction_time:"2021-09-27",
                resultCode:"OK",
                description:"OK",
                data:{
                    id: roomid,
                    tbHostId: hostid,
                    rmName: rmName,
                    rmType:rmType,
                    rmNumber: rmNumber,
                    rmIntro: rmIntro,
                    rmService: rmService,
                    prSdate: days1,//pr_sdate
                    prSprice: prSprice,
                    prDate: days2,//pr_date
                    prPrice: prPrice
                    // tbMemId: memid


                }
            }
        }).then(
            alert('저장되었습니다!'),
            location.href="/hosthousemain/"


        )
        return false;
    }

    //이미지관련
    function ahn_edit_Img(e){
        //룸 아이디
        let roomid = $('#id').val();
        // let hostid = $('#hostid').val();
        let imgid = $(e).attr('value');
        imgid = imgid.substr(4);
        console.log(roomid);
        console.log(imgid);
        if (!confirm("이미지를 수정하시겠습니까?")) {
            alert("취소(아니오)를 누르셨습니다.");

        } else {

            $('.ahn_edit_hostimg_1').click();
            $("#ahn_edit_hostimg_1").change(function(e){

                const FileElement = document.querySelector('#ahn_edit_hostimg_1');
                const formData = new FormData(); //formdata생성
//룸?호스트?>
                const data = {tbRoomId : roomid}
                console.log([JSON.stringify(data)]);
                formData.append("data", new Blob([JSON.stringify(data)], {type: "application/json"}));

                for(let i = 0; i < FileElement.files.length; i++){ // 길이만큼 반복
                    formData.append("files", FileElement.files[i]); // append(키,값)
                }
                console.log(formData.getAll('data')); //(키)의 값을 전부 보여줌
                console.log(formData.getAll('files')); //(키)의 값을 전부 보여줌
                // alert("확인(예)을 누르셨습니다.");

                axios.put('/room/img/'+imgid ,formData, {
                    headers: {'Content-type': 'multipart/form-data'}


                }).then(function (response){
                    console.log(response);
                }).catch(function(err){
                    console.log(err);
                })
                alert('이미지를 저장했습니다.');
                return false;
            });
        }//if문

    }



    function ahn_del_Img(e){
        //룸 아이디
        let roomid = $('#id').val();
        // let hostid = $('#hostid').val();
        let imgid = $(e).attr('value');
        // hostid = hostid.substr(4);
        imgid = imgid.substr(4);
        console.log(roomid);
        console.log(imgid);
        if (!confirm("이미지를 삭제하시겠습니까?")) {
            alert("취소(아니오)를 누르셨습니다.");

        } else {



            // alert("확인(예)을 누르셨습니다.");

            axios.delete('/room/img/'+imgid , {
                headers: {'Content-type': 'application/json'}

            }).then(function (response){
                console.log(response);
            }).catch(function(err){
                console.log(err);
            })
            alert('이미지를 삭제했습니다.');
            return false;
        }//if문
    }


    function sendit(){


        let hostId = $('#hostid').val();

        const FileElement = document.querySelector('#imgFile');

        const formData = new FormData(); //formdata생성

        // const data = {tbHostId : $("#tbHostId").val() }
        const data = {tbHostId : hostid}
        console.log('호스트아이디');
        console.log(data);
        console.log('호스트아이디2');
        console.log([JSON.stringify(data)]);

        formData.append("data", new Blob([JSON.stringify(data)], {type: "application/json"}));





        // formData.append("tbHostId", "1"); // 호스트 id
        // formData.append("data", '1'); // 호스트 id
        // formData.append("content", "this is content");
        for(let i = 0; i < FileElement.files.length; i++){ // 길이만큼 반복
            formData.append("files", FileElement.files[i]); // append(키,값)
        }
        console.log(formData.getAll('data')); //(키)의 값을 전부 보여줌
        console.log(formData.getAll('files')); //(키)의 값을 전부 보여줌



        // alert('멈춤');
        axios.post('/room/img',formData, {
            headers: {'Content-type': 'multipart/form-data'}


        }).then(function (response){
            console.log(response);
        }).catch(function(err){
            console.log(err);
        })
        alert('이미지 저장');
        return false;

    }



</script>








</body>

</html>